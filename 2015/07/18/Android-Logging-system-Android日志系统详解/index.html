
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Android日志系统(logging system)详解 | Andy.Lee&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Andy.Lee">
    

    
    <meta name="description" content="Android日志系统详解　　How to debug with Android logging　　怎么抓取Android日志文件
　　不管是做Android应用还是做Android中间层和底层，Logging系统都是必须要了解的；因为Android不像单片机程序UCOS那么简单,可以很方便的单步调试。所以，就准备用一篇blog来分析一下logging system。
概览　　Android提供了">
<meta property="og:type" content="article">
<meta property="og:title" content="Android日志系统(logging system)详解">
<meta property="og:url" content="http://huaqianlee.me/2015/07/18/Android-Logging-system-Android日志系统详解/index.html">
<meta property="og:site_name" content="Andy.Lee's blog">
<meta property="og:description" content="Android日志系统详解　　How to debug with Android logging　　怎么抓取Android日志文件
　　不管是做Android应用还是做Android中间层和底层，Logging系统都是必须要了解的；因为Android不像单片机程序UCOS那么简单,可以很方便的单步调试。所以，就准备用一篇blog来分析一下logging system。
概览　　Android提供了">
<meta property="og:image" content="http://7xjdax.com1.z0.glb.clouddn.com/blogAndroid-logging-system.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android日志系统(logging system)详解">
<meta name="twitter:description" content="Android日志系统详解　　How to debug with Android logging　　怎么抓取Android日志文件
　　不管是做Android应用还是做Android中间层和底层，Logging系统都是必须要了解的；因为Android不像单片机程序UCOS那么简单,可以很方便的单步调试。所以，就准备用一篇blog来分析一下logging system。
概览　　Android提供了">
<meta name="twitter:creator" content="@Andylee_sarah">
<link rel="publisher" href="107850537041795428182">

    
    <link rel="alternative" href="/atom.xml" title="Andy.Lee&#39;s blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Andy.Lee&#39;s blog" title="Andy.Lee&#39;s blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Andy.Lee&#39;s blog">Andy.Lee&#39;s blog</a></h1>
				<h2 class="blog-motto">Good good study, day day up !</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/categories">Categories</a></li>
					
						<li><a href="/tags">Tags</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:huaqianlee.me">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
<!--<a href="https://github.com/AndyLee-Github"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"></a>-->
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/18/Android-Logging-system-Android日志系统详解/" title="Android日志系统(logging system)详解" itemprop="url">Android日志系统(logging system)详解</a>
  </h1>

  
  <p class="article-author">By
       
		<a href="https://plus.google.com/107850537041795428182?rel=author" title="Andy.Lee" target="_blank" itemprop="author">Andy.Lee</a>
		
  <p class="article-time">
    <time datetime="2015-07-18T05:43:04.000Z" itemprop="datePublished"> 发表于 Jul 18 2015</time>
    
  </p>
  
</header>
	<div class="article-content">
		
		<p>　　<a href="http://huaqianlee.me/2015/07/18/Android-Logging-system-Android%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3/" target="_blank" rel="external">Android日志系统详解</a><br>　　<a href="http://huaqianlee.me/2015/07/18/%E6%80%8E%E4%B9%88%E7%94%A8Android%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F%E6%9B%B4%E5%A5%BD%E5%9C%B0%E5%8E%BB%E8%B0%83%E8%AF%95-How-to-debug-with-Android-logging/" target="_blank" rel="external">How to debug with Android logging</a><br>　　<a href="http://huaqianlee.me/2015/07/19/%E6%80%8E%E4%B9%88%E6%8A%93%E5%8F%96Android%E6%B5%8B%E8%AF%95%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6-How-to-get-android-log-file/" target="_blank" rel="external">怎么抓取Android日志文件</a></p>
<p>　　不管是做Android应用还是做Android中间层和底层，Logging系统都是必须要了解的；因为Android不像单片机程序UCOS那么简单,可以很方便的单步调试。所以，就准备用一篇blog来分析一下logging system。</p>
<h2 id="概览">概览</h2><p>　　Android提供了一个灵活的logging系统，允许应用程序和系统组件等整个系统记录logging信息，它是独立于Linux Kernel的一个logging系统，kernel是通过”pr_info”、”printk”等存储，通过“dmesg”或“cat  /proc/kmsg”获取。不过，Android logging 系统也是将信息存在内核缓存区。其结构如下：　<br>　<br>　　　　<img src="http://7xjdax.com1.z0.glb.clouddn.com/blogAndroid-logging-system.png" alt="image by Tetsuyuki Kobabayshi"><br><a id="more"></a>　<br>Logging system由如下几部分组成：</p>
<ul>
<li>实现loging信息存储的kernel驱动和缓存区</li>
<li>C，C++和Java 类添加与读取log</li>
<li>一个单独浏览log信息的程序（logcat）</li>
<li>能够查看和过滤来自主机的log信息（通过Android Studio 或者 DDMS）</li>
</ul>
<p>其在kernel中为系统的不同部分提供了四个不同log缓存区，可以通过/dev/log查看这些不同的设备节点，如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/dev/<span class="built_in">log</span>/mian ： 主应用程序<span class="built_in">log</span>，除了下三个外，其他用户空间<span class="built_in">log</span>将写入此节点，包括System.out.print及System.erro.print等</span><br><span class="line">/dev/<span class="built_in">log</span>/events ： 系统事件信息，二进制<span class="built_in">log</span>信息将写入此节点，需要程序解析</span><br><span class="line">/dev/<span class="built_in">log</span>/radio ： 射频通话相关信息，tag 为<span class="string">"HTC_RIL"</span> <span class="string">"RILJ"</span> <span class="string">"RILC"</span> <span class="string">"RILD"</span> <span class="string">"RIL"</span> <span class="string">"AT"</span> <span class="string">"GSM"</span> <span class="string">"STK"</span>的<span class="built_in">log</span>信息将写入此节点</span><br><span class="line">/dev/<span class="built_in">log</span>/system ： 低等级系统信息和debugging,为了防止mian缓存区溢出,而从中分离出来</span><br></pre></td></tr></table></figure></p>
<p>log中的每条信息主要由四部分组成，如下：</p>
<ul>
<li>Tag</li>
<li>时间戳</li>
<li>log信息level(或者event的优先级)</li>
<li>log信息</li>
</ul>
<h2 id="Android_logger">Android logger</h2><p>　　logging的kernel driver部分被称作”logger”，其为系统日志提供支持，代码路径: kernel/drivers/staging/android/logger.c，此文件对4种logging缓存区加以支持。</p>
<h3 id="驱动">驱动</h3><p>　　Log的读写是通过正常Linux文件读写方式完成的，write path被很好的优化过，所以能很快的open()、write()及close()，这样就避免了logging在系统中有太多的开销，影响速度。
　</p>
<h5 id="Reading">Reading</h5><p>　　在用户空间，一个正常的read操作通常读取从log读取一个条目，每read一次返回一个log条目或者阻塞等待下一个log条目。设备可以打开非阻塞模式。每一个read请求应该至少请求LOGGER_ENTRY_MAX_LEN (4096)长度的数据。
　</p>
<h4 id="Writing">Writing</h4><p>　　当系统写数据到log时，driver将为每一个log条目保存pid（进程ID），tgid（线程组ID），timestamp（时间戳），这些信息将出现在用户空间的level，tag和message中。
　</p>
<h4 id="Ioctl">Ioctl</h4><p>　　Ioctl函数支持如下cmd：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- LOGGER_GET_LOG_BUF_SIZE ： <span class="built_in">log</span>条目缓存区的大小</span><br><span class="line">- LOGGER_GET_LOG_LEN ： <span class="built_in">log</span>数据的长度</span><br><span class="line">- LOGGER_GET_NEXT_ENTRY_LEN： 下一<span class="built_in">log</span>条目的大小</span><br><span class="line">- LOGGER_FLUSH_LOG ： 清除<span class="built_in">log</span>数据</span><br><span class="line">- LOGGER_GET_VERSION ： 获得logger版本</span><br><span class="line">- LOGGER_GET_VERSION ： 设置logger版本</span><br></pre></td></tr></table></figure>
<h3 id="设备节点">设备节点</h3><p>　　当一个用户空间执行的程序用合适的主设备号和次设备号打开设备节点后，设备节点就处于活动状态，这些设备节点如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@msm8916_32:/ <span class="comment"># ls -al dev/log</span></span><br><span class="line">ls -al dev/<span class="built_in">log</span></span><br><span class="line">crw-rw-rw- root     <span class="built_in">log</span>       <span class="number">10</span>,  <span class="number">61</span> <span class="number">1970</span>-<span class="number">01</span>-<span class="number">09</span> <span class="number">02</span>:<span class="number">14</span> events</span><br><span class="line">crw-rw-rw- root     <span class="built_in">log</span>       <span class="number">10</span>,  <span class="number">62</span> <span class="number">1970</span>-<span class="number">01</span>-<span class="number">09</span> <span class="number">02</span>:<span class="number">14</span> main</span><br><span class="line">crw-rw-rw- root     <span class="built_in">log</span>       <span class="number">10</span>,  <span class="number">60</span> <span class="number">1970</span>-<span class="number">01</span>-<span class="number">09</span> <span class="number">02</span>:<span class="number">14</span> radio</span><br><span class="line">crw-rw-rw- root     <span class="built_in">log</span>       <span class="number">10</span>,  <span class="number">59</span> <span class="number">1970</span>-<span class="number">01</span>-<span class="number">09</span> <span class="number">02</span>:<span class="number">14</span> system</span><br></pre></td></tr></table></figure></p>
<h2 id="系统和应用程序logging">系统和应用程序logging</h2><p>　　所有的log信息在Java类中定义并做相应处理，最终一个格式化的消息通过C/C++库传递到内核驱动程序,然后再将消息存储在适当的缓冲区中。</p>
<h3 id="App_log">App  log</h3><p>　　App通过导入android.util.Log包来引入Log类，然后通过log方法写不同优先级的相关信息到log。Java类定义传递到log方法的tag为字符串常量，log方法通过这些字符串来获知信息的重要性，这样，当我们用log查看工具（如logcat）时，就可以过滤tag或者优先级来获取我们想要的信息。如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@msm8916_32:/ <span class="comment"># logcat</span></span><br><span class="line">logcat</span><br><span class="line">--------- beginning of system</span><br><span class="line">I/Vold    (  <span class="number">265</span>): Vold <span class="number">2.1</span> (the revenge) firing up</span><br><span class="line">D/Vold    (  <span class="number">265</span>): Volume sdcard1 state changing -<span class="number">1</span> (Initializing) -&gt; <span class="number">0</span> (No-Media)</span><br><span class="line">D/Vold    (  <span class="number">265</span>): Volume uicc0 state changing -<span class="number">1</span> (Initializing) -&gt; <span class="number">0</span> (No-Media)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">D/Vold    (  <span class="number">265</span>): Volume usbotg state changing -<span class="number">1</span> (Initializing) -&gt; <span class="number">0</span> (No-Media)</span><br><span class="line"></span><br><span class="line">D/Vold    (  <span class="number">265</span>): Volume uicc1 state changing -<span class="number">1</span> (Initializing) -&gt; <span class="number">0</span> (No-Media)</span><br><span class="line">I/Cryptfs (  <span class="number">265</span>): Check <span class="keyword">if</span> PFE is activated on Boot</span><br><span class="line">E/Cryptfs (  <span class="number">265</span>): Bad magic <span class="keyword">for</span> real block device /dev/block/bootdevice/by-name/userdata</span><br><span class="line">E/Cryptfs (  <span class="number">265</span>): Error getting crypt footer and key</span><br><span class="line">I/irsc_util(  <span class="number">316</span>): irsc tool created:<span class="number">0</span>xb70ff688</span><br><span class="line">I/irsc_util(  <span class="number">316</span>): Starting irsc tool</span><br><span class="line">I/irsc_util(  <span class="number">316</span>): Trying to open sec config file</span><br></pre></td></tr></table></figure></p>
<h3 id="Event_log">Event log</h3><p>　　Event logs是在android.util.EventLog.class中创建二进制log信息。Log条目由二进制tag代码和二进制参数构成。Event logs 文件存储在system/etc/event-log-tags中，通过cat system/etc/event-log-tags能查看其信息。如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@msm8916_32:/ <span class="comment"># cat system/etc/event-log-tags</span></span><br><span class="line">cat system/etc/event-log-tags</span><br><span class="line"><span class="number">42</span> answer (to life the universe etc|<span class="number">3</span>)</span><br><span class="line"><span class="number">314</span> pi</span><br><span class="line"><span class="number">1003</span> auditd (avc|<span class="number">3</span>)</span><br><span class="line"><span class="number">2718</span> e</span><br><span class="line"><span class="number">2719</span> configuration_changed (config mask|<span class="number">1</span>|<span class="number">5</span>)</span><br><span class="line"><span class="number">2720</span> sync (id|<span class="number">3</span>),(event|<span class="number">1</span>|<span class="number">5</span>),(<span class="built_in">source</span>|<span class="number">1</span>|<span class="number">5</span>),(account|<span class="number">1</span>|<span class="number">5</span>)</span><br><span class="line"><span class="number">2721</span> cpu (total|<span class="number">1</span>|<span class="number">6</span>),(user|<span class="number">1</span>|<span class="number">6</span>),(system|<span class="number">1</span>|<span class="number">6</span>),(iowait|<span class="number">1</span>|<span class="number">6</span>),(irq|<span class="number">1</span>|<span class="number">6</span>),(softirq|<span class="number">1</span>|<span class="number">6</span>)</span><br><span class="line"><span class="number">2722</span> battery_level (level|<span class="number">1</span>|<span class="number">6</span>),(voltage|<span class="number">1</span>|<span class="number">1</span>),(temperature|<span class="number">1</span>|<span class="number">1</span>)</span><br><span class="line"><span class="number">2723</span> battery_status (status|<span class="number">1</span>|<span class="number">5</span>),(health|<span class="number">1</span>|<span class="number">5</span>),(present|<span class="number">1</span>|<span class="number">5</span>),(plugged|<span class="number">1</span>|<span class="number">5</span>),(technology|<span class="number">3</span>)</span><br><span class="line"><span class="number">2724</span> power_sleep_requested (wakeLocksCleared|<span class="number">1</span>|<span class="number">1</span>)</span><br><span class="line"><span class="number">2725</span> power_screen_broadcast_send (wakelockCount|<span class="number">1</span>|<span class="number">1</span>)</span><br><span class="line"><span class="number">2726</span> power_screen_broadcast_<span class="keyword">done</span> (on|<span class="number">1</span>|<span class="number">5</span>),(broadcastDuration|<span class="number">2</span>|<span class="number">3</span>),(wakelockCount|<span class="number">1</span>|<span class="number">1</span>)</span><br><span class="line"><span class="number">2727</span> power_screen_broadcast_stop (<span class="built_in">which</span>|<span class="number">1</span>|<span class="number">5</span>),(wakelockCount|<span class="number">1</span>|<span class="number">1</span>)</span><br><span class="line"><span class="number">2728</span> power_screen_state (offOrOn|<span class="number">1</span>|<span class="number">5</span>),(becauseOfUser|<span class="number">1</span>|<span class="number">5</span>),(totalTouchDownTime|<span class="number">2</span>|<span class="number">3</span>),(touchCycles|<span class="number">1</span>|<span class="number">1</span>)</span><br><span class="line"><span class="number">2729</span> power_partial_wake_state (releasedorAcquired|<span class="number">1</span>|<span class="number">5</span>),(tag|<span class="number">3</span>)</span><br><span class="line"><span class="number">2730</span> battery_discharge (duration|<span class="number">2</span>|<span class="number">3</span>),(minLevel|<span class="number">1</span>|<span class="number">6</span>),(maxLevel|<span class="number">1</span>|<span class="number">6</span>)</span><br><span class="line"><span class="number">2740</span> location_controller</span><br></pre></td></tr></table></figure></p>
<h3 id="System_log">System log</h3><p>　　framework层的许多类通过使用system log 来与app的log信息区分开来。System log在android.util.Slog.clash中实现。</p>
<h3 id="log命令行工具">log命令行工具</h3><p>　　log命令行工具能用来给任意程序穿件log条目，此工具是内建与toolbox的多功能程序。在adb shell中输入log则会提示其用法，如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;adb shell</span><br><span class="line">root@msm8916_32:/ <span class="comment"># log</span></span><br><span class="line"><span class="built_in">log</span></span><br><span class="line">USAGE: <span class="built_in">log</span> [-p priorityChar] [-t tag] message</span><br><span class="line">        priorityChar should be one of:</span><br><span class="line">                v,d,i,w,e</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>toolbox: 具有管理内存、备份和数据清除功能的一个系统文件，用来对手机性能进行设置，需要root权限，能被软件调用。　</p>
</blockquote>
<h3 id="logwrapper">logwrapper</h3><p>　　logwrapper工具是用来捕捉stdout信息的，当需要从本地应用捕捉stdout信息到log时，它将十分有用。源码路径：system/core/logwrapper/logwrapper.c；用法如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@msm8916_32:/ <span class="comment"># logwrapper</span></span><br><span class="line">logwrapper</span><br><span class="line">Usage: logwrapper [<span class="operator">-a</span>] [<span class="operator">-d</span>] [-k] BINARY [ARGS ...]</span><br><span class="line"></span><br><span class="line">Forks and executes BINARY ARGS, redirecting stdout and stderr to</span><br><span class="line">the Android logging system. Tag is <span class="built_in">set</span> to BINARY, priority is</span><br><span class="line">always LOG_INFO.</span><br><span class="line"></span><br><span class="line"><span class="operator">-a</span>: Causes logwrapper to <span class="keyword">do</span> abbreviated logging.</span><br><span class="line">    This logs up to the first <span class="number">4</span>K and last <span class="number">4</span>K of the <span class="built_in">command</span></span><br><span class="line">    being run, and logs the output when the <span class="built_in">command</span> exits</span><br><span class="line"><span class="operator">-d</span>: Causes logwrapper to SIGSEGV when BINARY terminates</span><br><span class="line">    fault address is <span class="built_in">set</span> to the status of <span class="built_in">wait</span>()</span><br><span class="line">-k: Causes logwrapper to <span class="built_in">log</span> to the kernel <span class="built_in">log</span> instead of</span><br><span class="line">    the Android system <span class="built_in">log</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Logcat命令">Logcat命令</h3><p>　　我们可以通过logcat命令查看log，这个命令文件在文件系统的system/bin目录下，所以我们可以到文件系统中执行logcat，或者直接adb logcat，都能查看log。adb用法可以查看<a href="http://developer.android.com/guide/developing/tools/adb.html" target="_blank" rel="external">adb.html</a>(需翻墙，等什么时候有空以中文形式移到blog来)。</p>
<ul>
<li>每一个有tag和优先级的log信息</li>
<li>可以通过tag和log等级过滤log信息</li>
<li>可以通过系统属性指定程序将stdout和stderr内容写入日志</li>
</ul>
<h2 id="在启动阶段默认打开Logcat">在启动阶段默认打开Logcat</h2><p>　　Android logging和kernel logging是完全不同的两种日志系统，另补充一点，kernel日志支持直接在用户空间向/dev/kmsg写入log条目。<a href="http://groups.google.com/group/android-kernel/browse_thread/thread/87d929863ce7c29e/f8b0da9ed6376b2f?pli=1" target="_blank" rel="external">groups.google.com</a>中介绍了如何在启动阶段launch Logcat，如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">it can be launched via init.rc as below.. </span><br><span class="line"></span><br><span class="line">service logcat /system/bin/logcat <span class="operator">-f</span> /dev/kmsg </span><br><span class="line">       oneshot</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>不推荐这样做，这样会增加打印开销，使系统卡顿　</p>
</blockquote>
<h2 id="Reference">Reference　　</h2><p><a href="http://elinux.org/Android_Logging_System" target="_blank" rel="external">http://elinux.org/Android_Logging_System</a> (大部分内容译自此文档)<br><a href="http://developer.android.com/guide/developing/tools/adb.html" target="_blank" rel="external">http://developer.android.com/guide/developing/tools/adb.html</a><br><a href="http://groups.google.com/group/android-kernel/browse_thread/thread/87d929863ce7c29e/f8b0da9ed6376b2f?pli=1" target="_blank" rel="external">http://groups.google.com/group/android-kernel/browse_thread/thread/87d929863ce7c29e/f8b0da9ed6376b2f?pli=1</a></p>
  
	</div>
		<footer class="article-footer clearfix">
	
<div>

  	<span> </span>
  	本文为原创文章，出自<a href="/">Andy Lee's blog</a><br/>
	欢迎转载，但请注明原地址: <a href="/2015/07/18/Android-Logging-system-Android日志系统详解/" >huaqianlee.me/2015/07/18/Android-Logging-system-Android日志系统详解/ </a>

</div>
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Android/">Android</a>►<a class="article-category-link" href="/categories/Android/译文/">译文</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Log/">Log</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	<div class="share-jiathis">
	  
<div class="jiathis_style_24x24">
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_googleplus"></a>
	<a class="jiathis_button_douban"></a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
    var jiathis_config={
    data_track_clickback:true,
    sm:"copy,renren,cqq",
    pic:"",
    summary:"",
    
  </script> 
<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=
" charset="utf-8"></script>      

	 </div>
	
	</div>



</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/07/18/怎么用Android日志系统更好地去调试-How-to-debug-with-Android-logging/" title="How to debug with Android logging">
  <strong>上一篇：</strong><br/>
  <span>
  How to debug with Android logging</span>
</a>
</div>


<div class="next">
<a href="/2015/07/12/Android编译过程详解之三/"  title="Android编译过程详解之三">
 <strong>下一篇：</strong><br/> 
 <span>Android编译过程详解之三
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2015/07/18/Android-Logging-system-Android日志系统详解/" data-title="Android日志系统(logging system)详解" data-url="http://huaqianlee.me/2015/07/18/Android-Logging-system-Android日志系统详解/"></div>
</section>


<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Android/" title="Android">Android<sup>12</sup></a></li>
		  
		
		  
			<li><a href="/categories/Git/" title="Git">Git<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hexo/" title="Hexo">Hexo<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Java/" title="Java">Java<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Life/" title="Life">Life<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Thinking/" title="Thinking">Thinking<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Android/译文/" title="译文">译文<sup>2</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Tools/" title="Tools">Tools<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/编译/" title="编译">编译<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Log/" title="Log">Log<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/文件IO/" title="文件IO">文件IO<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/kernel/" title="kernel">kernel<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/网络/" title="网络">网络<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Bug/" title="Bug">Bug<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Experience/" title="Experience">Experience<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Program-Kill/" title="Program Kill">Program Kill<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/电源管理/" title="电源管理">电源管理<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Android-Studio/" title="Android Studio">Android Studio<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/shell/" title="shell">shell<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://blog.daimajia.com/" target="_blank" title="代码家">代码家</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.stormzhang.com/" target="_blank" title="stormzhang">stormzhang</a>
            
          </li>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Andy Lau in Hongkong. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/huaqianlee" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/AndyLee-Github" target="_blank" class="icon-github" title="github"></a>
		
		
		<a href="http://stackoverflow.com/users/4511267/huaqian-lee" target="_blank" class="icon-stack-overflow" title="stackoverflow"></a>
		
		
		<a href="https://twitter.com/Andylee_sarah" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		<a href="https://www.facebook.com/huaqianlee" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		
		
		<a href="http://www.zhihu.com/people/huaqianlee" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		<a href="https://plus.google.com/107850537041795428182?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
		<a href="mailto:huaqianlee@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/AndyLee-Github/customtheme" target="_blank" title="Andy Lee">Andy Lee</a> © 2015 
		
		<a href="/about" target="_blank" title="Andy.Lee">Andy.Lee</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>




<script type="text/javascript">
  var duoshuoQuery = {short_name:"AndyLee"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 


<script type="text/javascript">

var disqus_shortname = 'AndyLee';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-63838023-1', 'huaqianlee.me');  
ga('send', 'pageview');
</script>



<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F5ab1107031547fb5411cd06ed47f1348## e.g. e6d1f421bbc9962127a50488f9ed37d1 your baidu tongji site code' type='text/javascript'%3E%3C/script%3E"));
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
